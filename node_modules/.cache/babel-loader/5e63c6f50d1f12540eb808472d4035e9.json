{"remainingRequest":"/Users/apple/Desktop/haha/vue/myspace/node_modules/thread-loader/dist/cjs.js!/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/apple/Desktop/haha/vue/myspace/src/views/UserProfileView.vue?vue&type=template&id=6a55c940&scoped=true","dependencies":[{"path":"/Users/apple/Desktop/haha/vue/myspace/src/views/UserProfileView.vue","mtime":1667044290382},{"path":"/Users/apple/Desktop/haha/vue/myspace/babel.config.js","mtime":1667036937183},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/thread-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js","mtime":1665369387354},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1665369388402},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/index.js","mtime":1665369387346}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHdpdGhDdHggYXMgX3dpdGhDdHgsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgpjb25zdCBfd2l0aFNjb3BlSWQgPSBuID0+IChfcHVzaFNjb3BlSWQoImRhdGEtdi02YTU1Yzk0MCIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuKTsKCmNvbnN0IF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJyb3ciCn07CmNvbnN0IF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJjb2wtMyIKfTsKY29uc3QgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogImNvbC05Igp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIGNvbnN0IF9jb21wb25lbnRfVXNlclByb2ZpbGVJbmZvID0gX3Jlc29sdmVDb21wb25lbnQoIlVzZXJQcm9maWxlSW5mbyIpOwoKICBjb25zdCBfY29tcG9uZW50X1VzZXJQcm9maWxlV3JpdGUgPSBfcmVzb2x2ZUNvbXBvbmVudCgiVXNlclByb2ZpbGVXcml0ZSIpOwoKICBjb25zdCBfY29tcG9uZW50X1VzZXJQcm9maWxlUG9zdHMgPSBfcmVzb2x2ZUNvbXBvbmVudCgiVXNlclByb2ZpbGVQb3N0cyIpOwoKICBjb25zdCBfY29tcG9uZW50X0NvbnRlbnRCYXNlID0gX3Jlc29sdmVDb21wb25lbnQoIkNvbnRlbnRCYXNlIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X0NvbnRlbnRCYXNlLCBudWxsLCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eCgoKSA9PiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9Vc2VyUHJvZmlsZUluZm8sIHsKICAgICAgb25Gb2xsb3c6ICRzZXR1cC5mb2xsb3csCiAgICAgIG9uVW5mb2xsb3c6ICRzZXR1cC51bmZvbGxvdywKICAgICAgdXNlcjogJHNldHVwLnVzZXIKICAgIH0sIG51bGwsIDgsIFsib25Gb2xsb3ciLCAib25VbmZvbGxvdyIsICJ1c2VyIl0pLCAkc2V0dXAuaXNfbWUgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9Vc2VyUHJvZmlsZVdyaXRlLCB7CiAgICAgIGtleTogMCwKICAgICAgb25Qb3N0X2FfcG9zdDogJHNldHVwLnBvc3RfYV9wb3N0CiAgICB9LCBudWxsLCA4LCBbIm9uUG9zdF9hX3Bvc3QiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X1VzZXJQcm9maWxlUG9zdHMsIHsKICAgICAgdXNlcjogJHNldHVwLnVzZXIsCiAgICAgIHBvc3RzOiAkc2V0dXAucG9zdHMsCiAgICAgIG9uRGVsZXRlX2FfcG9zdDogJHNldHVwLmRlbGV0ZV9hX3Bvc3QKICAgIH0sIG51bGwsIDgsIFsidXNlciIsICJwb3N0cyIsICJvbkRlbGV0ZV9hX3Bvc3QiXSldKV0pXSksCiAgICBfOiAxCiAgfSk7Cn0="},{"version":3,"mappings":";;;;;EAESA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EAINA,KAAK,EAAC;;;;;;;;;;;uBANfC,aAUcC,sBAVd,EAUc,IAVd,EAUc;sBATZ,MAQM,CARNC,oBAQM,KARN,cAQM,CAPJA,oBAGM,KAHN,cAGM,CAFJC,aAAsEC,0BAAtE,EAAsE;MAApDC,QAAM,EAAEC,aAA4C;MAAnCC,UAAQ,EAAED,eAAyB;MAAdE,IAAI,EAAEF;IAAQ,CAAtE,8CAEI,EADoBA,8BAAxBN,aAA4DS,2BAA5D,EAA4D;YAAA;MAA5BC,aAAW,EAAEJ;IAAe,CAA5D,8DACI,CAHN,CAOI,EAHJJ,oBAEM,KAFN,cAEM,CADJC,aAA8EQ,2BAA9E,EAA8E;MAA3DH,IAAI,EAAEF,WAAqD;MAA9CM,KAAK,EAAEN,YAAuC;MAA/BO,eAAa,EAAEP;IAAgB,CAA9E,gDACI,CAFN,CAGI,CARN,CAQM,EACM;;EAAA,CAVd","names":["class","_createBlock","_component_ContentBase","_createElementVNode","_createVNode","_component_UserProfileInfo","onFollow","$setup","onUnfollow","user","_component_UserProfileWrite","onPost_a_post","_component_UserProfilePosts","posts","onDelete_a_post"],"sourceRoot":"","sources":["/Users/apple/Desktop/haha/vue/myspace/src/views/UserProfileView.vue"],"sourcesContent":["<template>\n  <ContentBase>\n    <div class=\"row\">\n      <div class=\"col-3\">\n        <UserProfileInfo @follow=\"follow\" @unfollow=\"unfollow\" :user=\"user\" />\n        <UserProfileWrite v-if=\"is_me\" @post_a_post=\"post_a_post\" />\n      </div>\n      <div class=\"col-9\">\n        <UserProfilePosts :user=\"user\" :posts=\"posts\" @delete_a_post=\"delete_a_post\"/>\n      </div>\n    </div>\n  </ContentBase>\n</template>\n\n\n<script>\nimport ContentBase from '../components/ContentBase.vue';\nimport UserProfileInfo from '../components/UserProfileInfo.vue';\nimport UserProfilePosts from '../components/UserProfilePosts.vue';\nimport UserProfileWrite from '../components/UserProfileWrite.vue';\nimport { useRoute } from 'vue-router';\nimport { reactive } from 'vue';\nimport $ from 'jquery';\nimport { useStore } from 'vuex';\nimport { computed } from 'vue';\n\n\nexport default{\n  name: 'UserList',\n  components:{\n    ContentBase,\n    UserProfileInfo,\n    UserProfilePosts,\n    UserProfileWrite,\n  },\n  \n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const userId = route.params.userId;\n    const user = reactive({});\n    const posts = reactive({});\n\n    $.ajax({\n      url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\n      type: \"GET\",\n      data: {\n        user_id: userId,\n      },\n      headers: {\n        'Authorization': \"Bearer \" + store.state.user.access,\n      },\n      success(resp) {\n        user.id = resp.id;\n        user.username = resp.username;\n        user.photo = resp.photo;\n        user.followerCount = resp.followerCount;\n        user.is_followed = resp.is_followed;\n      }\n    });\n\n    $.ajax({\n      url: \"https://app165.acapp.acwing.com.cn/myspace/post/\",\n      type: \"GET\",\n      data: {\n        user_id: userId,\n      },\n      headers: {\n        'Authorization': \"Bearer \" + store.state.user.access,\n      },\n      success(resp){\n        posts.count = resp.length;\n        posts.posts = resp;\n      },\n    });\n\n\n    const follow = () => {\n      if(user.is_followed) return;\n      user.is_followed = true;\n      user.followerCount ++;\n    };\n\n    const unfollow = () => {\n      if(!user.is_followed) return;\n      user.is_followed = false;\n      user.followerCount --;\n    };\n\n    const post_a_post = content => {\n      posts.count ++;\n      posts.posts.unshift({\n        id: posts.count,\n        userId: 1,\n        content: content,\n      })\n    };\n\n    const delete_a_post = post_id => {\n      posts.posts = posts.posts.filter(posts => posts.id !== post_id);\n      posts.count = posts.posts.length;\n\n    }\n    \n    const is_me = computed(() => userId === store.state.user.id);\n\n    return{\n      user,\n      follow,\n      unfollow,\n      posts,\n      post_a_post,\n      is_me,\n      delete_a_post,\n\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n\n.img-field{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n</style>"]}]}