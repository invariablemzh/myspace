{"remainingRequest":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/apple/Desktop/haha/vue/myspace/src/views/UserProfileView.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/Desktop/haha/vue/myspace/src/views/UserProfileView.vue","mtime":1667044290382},{"path":"/Users/apple/Desktop/haha/vue/myspace/babel.config.js","mtime":1667036937183},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js","mtime":1665369387354},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/index.js","mtime":1665369387346}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zaGlmdC5qcyI7CmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi9jb21wb25lbnRzL0NvbnRlbnRCYXNlLnZ1ZSc7CmltcG9ydCBVc2VyUHJvZmlsZUluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VyUHJvZmlsZUluZm8udnVlJzsKaW1wb3J0IFVzZXJQcm9maWxlUG9zdHMgZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VyUHJvZmlsZVBvc3RzLnZ1ZSc7CmltcG9ydCBVc2VyUHJvZmlsZVdyaXRlIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlclByb2ZpbGVXcml0ZS52dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSc7CmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VyTGlzdCcsCiAgY29tcG9uZW50czogewogICAgQ29udGVudEJhc2UsCiAgICBVc2VyUHJvZmlsZUluZm8sCiAgICBVc2VyUHJvZmlsZVBvc3RzLAogICAgVXNlclByb2ZpbGVXcml0ZQogIH0sCgogIHNldHVwKCkgewogICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgY29uc3Qgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgY29uc3QgdXNlcklkID0gcm91dGUucGFyYW1zLnVzZXJJZDsKICAgIGNvbnN0IHVzZXIgPSByZWFjdGl2ZSh7fSk7CiAgICBjb25zdCBwb3N0cyA9IHJlYWN0aXZlKHt9KTsKICAgICQuYWpheCh7CiAgICAgIHVybDogImh0dHBzOi8vYXBwMTY1LmFjYXBwLmFjd2luZy5jb20uY24vbXlzcGFjZS9nZXRpbmZvLyIsCiAgICAgIHR5cGU6ICJHRVQiLAogICAgICBkYXRhOiB7CiAgICAgICAgdXNlcl9pZDogdXNlcklkCiAgICAgIH0sCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXphdGlvbic6ICJCZWFyZXIgIiArIHN0b3JlLnN0YXRlLnVzZXIuYWNjZXNzCiAgICAgIH0sCgogICAgICBzdWNjZXNzKHJlc3ApIHsKICAgICAgICB1c2VyLmlkID0gcmVzcC5pZDsKICAgICAgICB1c2VyLnVzZXJuYW1lID0gcmVzcC51c2VybmFtZTsKICAgICAgICB1c2VyLnBob3RvID0gcmVzcC5waG90bzsKICAgICAgICB1c2VyLmZvbGxvd2VyQ291bnQgPSByZXNwLmZvbGxvd2VyQ291bnQ7CiAgICAgICAgdXNlci5pc19mb2xsb3dlZCA9IHJlc3AuaXNfZm9sbG93ZWQ7CiAgICAgIH0KCiAgICB9KTsKICAgICQuYWpheCh7CiAgICAgIHVybDogImh0dHBzOi8vYXBwMTY1LmFjYXBwLmFjd2luZy5jb20uY24vbXlzcGFjZS9wb3N0LyIsCiAgICAgIHR5cGU6ICJHRVQiLAogICAgICBkYXRhOiB7CiAgICAgICAgdXNlcl9pZDogdXNlcklkCiAgICAgIH0sCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQXV0aG9yaXphdGlvbic6ICJCZWFyZXIgIiArIHN0b3JlLnN0YXRlLnVzZXIuYWNjZXNzCiAgICAgIH0sCgogICAgICBzdWNjZXNzKHJlc3ApIHsKICAgICAgICBwb3N0cy5jb3VudCA9IHJlc3AubGVuZ3RoOwogICAgICAgIHBvc3RzLnBvc3RzID0gcmVzcDsKICAgICAgfQoKICAgIH0pOwoKICAgIGNvbnN0IGZvbGxvdyA9ICgpID0+IHsKICAgICAgaWYgKHVzZXIuaXNfZm9sbG93ZWQpIHJldHVybjsKICAgICAgdXNlci5pc19mb2xsb3dlZCA9IHRydWU7CiAgICAgIHVzZXIuZm9sbG93ZXJDb3VudCsrOwogICAgfTsKCiAgICBjb25zdCB1bmZvbGxvdyA9ICgpID0+IHsKICAgICAgaWYgKCF1c2VyLmlzX2ZvbGxvd2VkKSByZXR1cm47CiAgICAgIHVzZXIuaXNfZm9sbG93ZWQgPSBmYWxzZTsKICAgICAgdXNlci5mb2xsb3dlckNvdW50LS07CiAgICB9OwoKICAgIGNvbnN0IHBvc3RfYV9wb3N0ID0gY29udGVudCA9PiB7CiAgICAgIHBvc3RzLmNvdW50Kys7CiAgICAgIHBvc3RzLnBvc3RzLnVuc2hpZnQoewogICAgICAgIGlkOiBwb3N0cy5jb3VudCwKICAgICAgICB1c2VySWQ6IDEsCiAgICAgICAgY29udGVudDogY29udGVudAogICAgICB9KTsKICAgIH07CgogICAgY29uc3QgZGVsZXRlX2FfcG9zdCA9IHBvc3RfaWQgPT4gewogICAgICBwb3N0cy5wb3N0cyA9IHBvc3RzLnBvc3RzLmZpbHRlcihwb3N0cyA9PiBwb3N0cy5pZCAhPT0gcG9zdF9pZCk7CiAgICAgIHBvc3RzLmNvdW50ID0gcG9zdHMucG9zdHMubGVuZ3RoOwogICAgfTsKCiAgICBjb25zdCBpc19tZSA9IGNvbXB1dGVkKCgpID0+IHVzZXJJZCA9PT0gc3RvcmUuc3RhdGUudXNlci5pZCk7CiAgICByZXR1cm4gewogICAgICB1c2VyLAogICAgICBmb2xsb3csCiAgICAgIHVuZm9sbG93LAogICAgICBwb3N0cywKICAgICAgcG9zdF9hX3Bvc3QsCiAgICAgIGlzX21lLAogICAgICBkZWxldGVfYV9wb3N0CiAgICB9OwogIH0KCn07"},{"version":3,"mappings":"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","names":["ContentBase","UserProfileInfo","UserProfilePosts","UserProfileWrite","useRoute","reactive","$","useStore","computed","name","components","setup","store","route","userId","params","user","posts","ajax","url","type","data","user_id","headers","state","access","success","resp","id","username","photo","followerCount","is_followed","count","length","follow","unfollow","post_a_post","content","unshift","delete_a_post","post_id","filter","is_me"],"sourceRoot":"","sources":["/Users/apple/Desktop/haha/vue/myspace/src/views/UserProfileView.vue"],"sourcesContent":["<template>\n  <ContentBase>\n    <div class=\"row\">\n      <div class=\"col-3\">\n        <UserProfileInfo @follow=\"follow\" @unfollow=\"unfollow\" :user=\"user\" />\n        <UserProfileWrite v-if=\"is_me\" @post_a_post=\"post_a_post\" />\n      </div>\n      <div class=\"col-9\">\n        <UserProfilePosts :user=\"user\" :posts=\"posts\" @delete_a_post=\"delete_a_post\"/>\n      </div>\n    </div>\n  </ContentBase>\n</template>\n\n\n<script>\nimport ContentBase from '../components/ContentBase.vue';\nimport UserProfileInfo from '../components/UserProfileInfo.vue';\nimport UserProfilePosts from '../components/UserProfilePosts.vue';\nimport UserProfileWrite from '../components/UserProfileWrite.vue';\nimport { useRoute } from 'vue-router';\nimport { reactive } from 'vue';\nimport $ from 'jquery';\nimport { useStore } from 'vuex';\nimport { computed } from 'vue';\n\n\nexport default{\n  name: 'UserList',\n  components:{\n    ContentBase,\n    UserProfileInfo,\n    UserProfilePosts,\n    UserProfileWrite,\n  },\n  \n  setup() {\n    const store = useStore();\n    const route = useRoute();\n    const userId = route.params.userId;\n    const user = reactive({});\n    const posts = reactive({});\n\n    $.ajax({\n      url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\n      type: \"GET\",\n      data: {\n        user_id: userId,\n      },\n      headers: {\n        'Authorization': \"Bearer \" + store.state.user.access,\n      },\n      success(resp) {\n        user.id = resp.id;\n        user.username = resp.username;\n        user.photo = resp.photo;\n        user.followerCount = resp.followerCount;\n        user.is_followed = resp.is_followed;\n      }\n    });\n\n    $.ajax({\n      url: \"https://app165.acapp.acwing.com.cn/myspace/post/\",\n      type: \"GET\",\n      data: {\n        user_id: userId,\n      },\n      headers: {\n        'Authorization': \"Bearer \" + store.state.user.access,\n      },\n      success(resp){\n        posts.count = resp.length;\n        posts.posts = resp;\n      },\n    });\n\n\n    const follow = () => {\n      if(user.is_followed) return;\n      user.is_followed = true;\n      user.followerCount ++;\n    };\n\n    const unfollow = () => {\n      if(!user.is_followed) return;\n      user.is_followed = false;\n      user.followerCount --;\n    };\n\n    const post_a_post = content => {\n      posts.count ++;\n      posts.posts.unshift({\n        id: posts.count,\n        userId: 1,\n        content: content,\n      })\n    };\n\n    const delete_a_post = post_id => {\n      posts.posts = posts.posts.filter(posts => posts.id !== post_id);\n      posts.count = posts.posts.length;\n\n    }\n    \n    const is_me = computed(() => userId === store.state.user.id);\n\n    return{\n      user,\n      follow,\n      unfollow,\n      posts,\n      post_a_post,\n      is_me,\n      delete_a_post,\n\n    }\n  }\n\n}\n</script>\n\n<style scoped>\n\n.img-field{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n</style>"]}]}