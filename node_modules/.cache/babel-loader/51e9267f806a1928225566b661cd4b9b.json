{"remainingRequest":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/haha/vue/myspace/node_modules/eslint-loader/index.js??ref--14-0!/Users/apple/Desktop/haha/vue/myspace/src/store/user.js","dependencies":[{"path":"/Users/apple/Desktop/haha/vue/myspace/src/store/user.js","mtime":1667032325088},{"path":"/Users/apple/Desktop/haha/vue/myspace/babel.config.js","mtime":1667036865844},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js","mtime":1665369387354},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/eslint-loader/index.js","mtime":1665369386293}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKaW1wb3J0IGp3dF9kZWNvZGUgZnJvbSAnand0LWRlY29kZSc7CmNvbnN0IE1vZHVsZXVzZXIgPSB7CiAgc3RhdGU6IHsKICAgIGlkOiAiIiwKICAgIHVzZXJuYW1lOiAiIiwKICAgIHBob3RvOiAiIiwKICAgIGZvbGxvd2VyQ291bnQ6IDAsCiAgICBhY2Nlc3M6ICIiLAogICAgcmVmcmVzaDogIiIsCiAgICBpc19sb2dpbjogZmFsc2UKICB9LAogIGdldHRlcnM6IHt9LAogIG11dGF0aW9uczogewogICAgdXBkYXRlVXNlcihzdGF0ZSwgdXNlcikgewogICAgICBzdGF0ZS5pZCA9IHVzZXIuaWQ7CiAgICAgIHN0YXRlLnVzZXJuYW1lID0gdXNlci51c2VybmFtZTsKICAgICAgc3RhdGUucGhvdG8gPSB1c2VyLnBob3RvOwogICAgICBzdGF0ZS5mb2xsb3dlckNvdW50ID0gdXNlci5mb2xsb3dlckNvdW50OwogICAgICBzdGF0ZS5hY2Nlc3MgPSB1c2VyLmFjY2VzczsKICAgICAgc3RhdGUucmVmcmVzaCA9IHVzZXIucmVmcmVzaDsKICAgICAgc3RhdGUuaXNfbG9naW4gPSB1c2VyLmlzX2xvZ2luOwogICAgfSwKCiAgICB1cGRhdGVBY2Nlc3Moc3RhdGUsIGFjY2VzcykgewogICAgICBzdGF0ZS5hY2Nlc3MgPSBhY2Nlc3M7CiAgICB9LAoKICAgIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5pZCA9ICIiOwogICAgICBzdGF0ZS51c2VybmFtZSA9ICIiOwogICAgICBzdGF0ZS5waG90byA9ICIiOwogICAgICBzdGF0ZS5mb2xsb3dlckNvdW50ID0gMDsKICAgICAgc3RhdGUuYWNjZXNzID0gIiI7CiAgICAgIHN0YXRlLnJlZnJlc2ggPSAiIjsKICAgICAgc3RhdGUuaXNfbG9naW4gPSBmYWxzZTsKICAgIH0KCiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbihjb250ZXh0LCBkYXRhKSB7CiAgICAgICQuYWpheCh7CiAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcHAxNjUuYWNhcHAuYWN3aW5nLmNvbS5jbi9hcGkvdG9rZW4vIiwKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZAogICAgICAgIH0sCgogICAgICAgIHN1Y2Nlc3MocmVzcCkgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBhY2Nlc3MsCiAgICAgICAgICAgIHJlZnJlc2gKICAgICAgICAgIH0gPSByZXNwOwogICAgICAgICAgY29uc3QgYWNjZXNzX29iaiA9IGp3dF9kZWNvZGUoYWNjZXNzKTsKICAgICAgICAgIHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FwcDE2NS5hY2FwcC5hY3dpbmcuY29tLmNuL2FwaS90b2tlbi9yZWZyZXNoLyIsCiAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgIHJlZnJlc2gKICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICBzdWNjZXNzKHJlc3ApIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCd1cGRhdGVBY2Nlc3MnLCByZXNwLmFjY2Vzcyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCA0LjUgKiA2MCAqIDEwMDApOwogICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcHAxNjUuYWNhcHAuYWN3aW5nLmNvbS5jbi9teXNwYWNlL2dldGluZm8vIiwKICAgICAgICAgICAgdHlwZTogIkdFVCIsCiAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICB1c2VyX2lkOiBhY2Nlc3Nfb2JqLnVzZXJfaWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiICsgYWNjZXNzCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzdWNjZXNzKHJlc3ApIHsKICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgidXBkYXRlVXNlciIsIHsgLi4ucmVzcCwKICAgICAgICAgICAgICAgIGFjY2VzczogYWNjZXNzLAogICAgICAgICAgICAgICAgcmVmcmVzaDogcmVmcmVzaCwKICAgICAgICAgICAgICAgIGlzX2xvZ2luOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgZGF0YS5zdWNjZXNzKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBlcnJvcigpIHsKICAgICAgICAgIGRhdGEuZXJyb3IoKTsKICAgICAgICB9CgogICAgICB9KTsKICAgIH0KCiAgfSwKICBtb2R1bGVzOiB7fQp9OwpleHBvcnQgZGVmYXVsdCBNb2R1bGV1c2VyOw=="},{"version":3,"names":["$","jwt_decode","Moduleuser","state","id","username","photo","followerCount","access","refresh","is_login","getters","mutations","updateUser","user","updateAccess","logout","actions","login","context","data","ajax","url","type","password","success","resp","access_obj","setInterval","commit","user_id","headers","error","modules"],"sources":["/Users/apple/Desktop/haha/vue/myspace/src/store/user.js"],"sourcesContent":["import $ from 'jquery';\nimport jwt_decode from 'jwt-decode';\n\nconst Moduleuser = {\n    state: {\n        id: \"\",\n        username: \"\",\n        photo: \"\",\n        followerCount: 0,\n        access: \"\",\n        refresh: \"\",\n        is_login: false,\n      },\n      getters: {\n      },\n      mutations: {\n          updateUser(state, user){\n              state.id = user.id;\n              state.username = user.username;\n              state.photo = user.photo;\n              state.followerCount = user.followerCount;\n              state.access = user.access;\n              state.refresh = user.refresh;\n              state.is_login = user.is_login;\n          },\n          updateAccess(state, access) {\n              state.access = access;\n          },\n          logout(state){\n            state.id = \"\";\n            state.username = \"\";\n            state.photo = \"\";\n            state.followerCount = 0;\n            state.access = \"\";\n            state.refresh = \"\";\n            state.is_login = false;\n          }\n\n      },\n      actions: {\n        login(context, data) {\n            $.ajax({\n                url: \"https://app165.acapp.acwing.com.cn/api/token/\",\n                type: \"POST\",\n                data: {\n                    username: data.username,\n                    password: data.password,\n                },\n                success(resp) {\n                    const {access, refresh} = resp;\n                    const access_obj = jwt_decode(access);\n\n                    setInterval(() => {\n                        $.ajax({\n                            url: \"https://app165.acapp.acwing.com.cn/api/token/refresh/\",\n                            type: \"POST\",\n                            data: {\n                                refresh,\n                            },\n                            success(resp) {\n                                context.commit('updateAccess', resp.access);\n                            }\n                        });\n                    }, 4.5 * 60 * 1000);\n\n                    $.ajax({\n                        url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\n                        type: \"GET\",\n                        data: {\n                            user_id: access_obj.user_id,\n                        },\n                        headers:{\n                            'Authorization': \"Bearer \" + access,\n                        },\n                        success(resp){\n                            context.commit(\"updateUser\",{\n                                ...resp,\n                                access: access,\n                                refresh: refresh,\n                                is_login: true,\n                            });\n                            data.success();\n                        },\n\n                    })\n                },\n                error() {\n                    data.error();\n                }\n            });\n        }, \n      },\n      modules: {\n      }\n};\n\nexport default Moduleuser;"],"mappings":"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"}]}