{"remainingRequest":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/apple/Desktop/haha/vue/myspace/src/components/UserProfileInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/Desktop/haha/vue/myspace/src/components/UserProfileInfo.vue","mtime":1667045560011},{"path":"/Users/apple/Desktop/haha/vue/myspace/babel.config.js","mtime":1667036937183},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/babel-loader/lib/index.js","mtime":1665369387354},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/cache-loader/dist/cjs.js","mtime":1665369386161},{"path":"/Users/apple/Desktop/haha/vue/myspace/node_modules/vue-loader-v16/dist/index.js","mtime":1665369387346}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyUHJvZmlsZUluZm8iLAogIHByb3BzOiB7CiAgICB1c2VyOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAoKICBzZXR1cChwcm9wcywgY29udGV4dCkgewogICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwoKICAgIGNvbnN0IGZvbGxvdyA9ICgpID0+IHsKICAgICAgJC5hamF4KHsKICAgICAgICB1cmw6ICJodHRwczovL2FwcDE2NS5hY2FwcC5hY3dpbmcuY29tLmNuL215c3BhY2UvZm9sbG93LyIsCiAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHRhcmdldF9pZDogcHJvcHMudXNlci5pZAogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAiQmVhcmVyICIgKyBzdG9yZS5zdGF0ZS51c2VyLmFjY2VzcwogICAgICAgIH0sCgogICAgICAgIHN1Y2Nlc3MocmVzcCkgewogICAgICAgICAgaWYgKHJlc3AucmVzdWx0ID09PSAic3VjY2VzcyIpIHsKICAgICAgICAgICAgY29udGV4dC5lbWl0KCdmb2xsb3cnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9KTsKICAgIH07CgogICAgY29uc3QgdW5mb2xsb3cgPSAoKSA9PiB7CiAgICAgICQuYWpheCh7CiAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcHAxNjUuYWNhcHAuYWN3aW5nLmNvbS5jbi9teXNwYWNlL2ZvbGxvdy8iLAogICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICB0YXJnZXRfaWQ6IHByb3BzLnVzZXIuaWQKICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiICsgc3RvcmUuc3RhdGUudXNlci5hY2Nlc3MKICAgICAgICB9LAoKICAgICAgICBzdWNjZXNzKHJlc3ApIHsKICAgICAgICAgIGlmIChyZXNwLnJlc3VsdCA9PT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgICAgIGNvbnRleHQuZW1pdCgndW5mb2xsb3cnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgZm9sbG93LAogICAgICB1bmZvbGxvdwogICAgfTsKICB9Cgp9Ow=="},{"version":3,"mappings":"AAsBA,OAAOA,CAAP,MAAc,QAAd;AACA,SAASC,QAAT,QAAyB,MAAzB;AAEA,eAAe;EACXC,IAAI,EAAE,iBADK;EAEXC,KAAK,EAAC;IACFC,IAAI,EAAC;MACDC,IAAI,EAAEC,MADL;MAEDC,QAAQ,EAAE;IAFT;EADH,CAFK;;EAQXC,KAAK,CAACL,KAAD,EAAQM,OAAR,EAAgB;IACjB,MAAMC,KAAI,GAAIT,QAAQ,EAAtB;;IACA,MAAMU,MAAK,GAAI,MAAM;MACjBX,CAAC,CAACY,IAAF,CAAO;QACHC,GAAG,EAAE,oDADF;QAEHR,IAAI,EAAE,MAFH;QAGHS,IAAI,EAAC;UACDC,SAAS,EAAEZ,KAAK,CAACC,IAAN,CAAWY;QADrB,CAHF;QAMHC,OAAO,EAAE;UACL,iBAAiB,YAAYP,KAAK,CAACQ,KAAN,CAAYd,IAAZ,CAAiBe;QADzC,CANN;;QASHC,OAAO,CAACC,IAAD,EAAM;UACT,IAAGA,IAAI,CAACC,MAAL,KAAgB,SAAnB,EAA6B;YACzBb,OAAO,CAACc,IAAR,CAAa,QAAb;UACJ;QAEJ;;MAdG,CAAP;IAgBJ,CAjBA;;IAkBA,MAAMC,QAAO,GAAI,MAAM;MACnBxB,CAAC,CAACY,IAAF,CAAO;QACHC,GAAG,EAAE,oDADF;QAEHR,IAAI,EAAE,MAFH;QAGHS,IAAI,EAAC;UACDC,SAAS,EAAEZ,KAAK,CAACC,IAAN,CAAWY;QADrB,CAHF;QAMHC,OAAO,EAAE;UACL,iBAAiB,YAAYP,KAAK,CAACQ,KAAN,CAAYd,IAAZ,CAAiBe;QADzC,CANN;;QASHC,OAAO,CAACC,IAAD,EAAM;UACT,IAAGA,IAAI,CAACC,MAAL,KAAgB,SAAnB,EAA6B;YACzBb,OAAO,CAACc,IAAR,CAAa,UAAb;UACJ;QACJ;;MAbG,CAAP;IAeJ,CAhBA;;IAkBA,OAAM;MACFZ,MADE;MAEFa;IAFE,CAAN;EAIJ;;AAlDW,CAAf","names":["$","useStore","name","props","user","type","Object","required","setup","context","store","follow","ajax","url","data","target_id","id","headers","state","access","success","resp","result","emit","unfollow"],"sourceRoot":"","sources":["/Users/apple/Desktop/haha/vue/myspace/src/components/UserProfileInfo.vue"],"sourcesContent":["<template>\n    <div class=\"card\">\n        <div class=\"card-body\">\n            <div class=\"row\">\n                <div class=\"col-3 img-field\">\n                    <img class=\"img-fluid\" :src=\"user.photo\" alt=\"\">\n                </div>\n                <div class=\"col-9\">\n                    <div class=\"username\">{{ user.username }}</div>\n                    <div class=\"fans\">粉丝：{{ user.followerCount }}</div>\n                    <button @click='follow' v-if=\"!user.is_followed\" type=\"button\" class=\"btn btn-secondary btn-sm\">+关注</button>\n                    <button @click='unfollow' v-if=\"user.is_followed\" type=\"button\" class=\"btn btn-secondary btn-sm\">+取消关注</button>\n                </div>\n            </div>    \n        </div>\n    </div>\n    \n</template>\n\n\n\n<script>\nimport $ from 'jquery';\nimport { useStore } from 'vuex';\n\nexport default {\n    name: \"UserProfileInfo\",\n    props:{\n        user:{\n            type: Object,\n            required: true,\n        },\n    },\n    setup(props, context){\n        const store = useStore();\n        const follow = () => {\n            $.ajax({\n                url: \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\n                type: \"POST\",\n                data:{\n                    target_id: props.user.id,\n                },\n                headers: {\n                    'Authorization': \"Bearer \" + store.state.user.access,\n                },\n                success(resp){\n                    if(resp.result === \"success\"){\n                        context.emit('follow');\n                    }\n                   \n                }\n            })\n        }\n        const unfollow = () => {\n            $.ajax({\n                url: \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\n                type: \"POST\",\n                data:{\n                    target_id: props.user.id,\n                },\n                headers: {\n                    'Authorization': \"Bearer \" + store.state.user.access,\n                },\n                success(resp){\n                    if(resp.result === \"success\"){\n                        context.emit('unfollow');\n                    }\n                }\n            })\n        }\n        \n        return{\n            follow,\n            unfollow,\n        }\n    }\n\n}\n</script>\n\n\n\n<style scoped>\nimg{\n    border-radius: 50%;\n}\n.username{\n    font-size: bold;\n}\n.fans{\n    font-size: 12px;\n    color: grey;\n}\n.img-field{\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n</style>\n"]}]}